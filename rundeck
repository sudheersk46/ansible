https://docs.rundeck.com/docs/administration/install/launcher.html

create variable 

RDECK_BASE
export RDECK_BASE=/home/rundeck
export PATH=$PATH:$RDECK_BASE/tools/bin
export MANPATH=$MANPATH:$RDECK_BASE/docs/man

##run from war java -Xmx3g -jar $RDECK_BASE/rundeck.war


##node creation from xml

project> <node name="testwinpc" connectionType="WINRM_NATIVE" node-executor="overthere-winrm" winrm-password-option="pass" winrm-protocol="http" winrm-auth-type="basic" username="admin" winrmPassword="password" description="Windows node" tags="" hostname="ip:5985" osArch="x86_64" osFamily="windows" osName="Windows 10" /> </project>

##rundeck save|encrypt password

https://thedataguy.in/encrypt-key-files-and-passwords-in-rundeck/


##crreating nodes

creat a project

cd to projectfolder undet etc  create resource.xml

<?xml version="1.0" encoding="UTF-8"?>
<project>
<node name="linux-remote"
  osFamily="unix"
  username="superuser"
  hostname="127.0.0.1"
  ssh-authentication="password" ## use password if providing password i key storage
  sudo-command-enabled="true"
  ssh-password-storage-path="keys/windows" ##name password saved file
  sudo-password-storage-path="keys/windows" ##name iof sudo saved file
  />
</project>

restart the service


##rundeck json and xml format

https://docs.rundeck.com/docs/api/index.html#running-adhoc-scripts

json
##working


##ssh & sudo resoaurce options

https://docs.rundeck.com/docs/administration/projects/node-execution/ssh.html

{

  "json-project": {
    "tags": "remote-server",
    "osFamily": "unix",
    "username": "user",
    "osVersion": "16",
    "osArch": "x86_64",
    "description": "Rundeck remote server node",
    "hostname": "127.0.0.1",
    "nodename": "json-project",
    "osName": "Ubuntu 16",
    "ssh-authetication":"password",
    "sudo-command-enabled": "yes",
    "sudo-password-storage-path":"keys/win",
    "ssh-password-storage-path":"keys/win"

 
  }
}
  
  
{
  "madmartigan.local": {
    "tags": "local,server",
    "osFamily": "unix",
    "username": "greg",
    "osVersion": "10.10.3",
    "osArch": "x86_64",
    "description": "Rundeck server node",
    "hostname": "madmartigan.local",
    "nodename": "madmartigan.local",
    "osName": "Mac OS X"
  },
  "test": {
    "tags": "alphabet, soup",
    "osFamily": "unix",
    "ssh-key-storage-path": "keys/testkey1.pem",
    "username": "vagrant",
    "osVersion": "10.10.3",
    "osArch": "x86_64",
    "description": "Rundeck server node",
    "hostname": "192.168.33.12",
    "nodename": "test",
    "osName": "Mac OS X"
  }
}







{
    "project":"[project]",
    "url":"[scriptURL]",
    "nodeThreadcount": #threadcount#,
    "nodeKeepgoing": true/false,
    "asUser": "[asUser]",
    "argString": "[argString]",
    "scriptInterpreter": "[scriptInterpreter]",
    "interpreterArgsQuoted": true/false,
    "fileExtension": "[fileExtension]",
    "filter": "[node filter string]"
}


##yaml format

- yaml.remote:
  description: The production remote yaml server.
  hostname: 127.0.0.1
  nodename: yaml.remote
  tags: 'yaml remote'
  username: user
  osName: "Ubuntu 16"
  osFamily: "unix"
  ssh-authetication: "password"
  sudo-command-enabled: yes
  "sudo-password-storage-path":"keys/win"
  sudo-password-storage-path: keys/windows

- Homestar.local:
  description: The production redis server.
  hostname: Homestar.local
  nodename: Homestar.local
  tags: 'redis_server,production'
  username: greg
- bartholemew:
  description: Webapp node
  hostname: bartholemew
  nodename: bartholemew
  tags: 'web,app'
  username: greg
  app-port: 8080
  https-port: 8443

https://docs.rundeck.com/docs/man5/resource-yaml.html
##adding windows node

https://github.com/rundeck-plugins/py-winrm-plugin

##windos node configure 

https://www.techpaste.com/2015/08/rundeck-windows-nodes-configuration/

##working  

##minimum 




  "json-winproject": {
    "tags": "remote-winjsonserver",
    "osFamily": "windows",
    "username": "admin",
    "winrm-password-option": "option.winrmPassword",
    "osVersion": "16",
    "osArch": "x86_64",
    "description": "Rundeck remote json server node",
    "hostname": "192.168.6.36",
    "nodename": "json-winproject",
    "osName": "windwos 8",
    "winrm-protocol": "http",
    "winrm-auth-type": "ntlm",
    "winrm-password-storage-path": "keys/windows"
 
  }
}
  ##

  "json-winproject": {
    "tags": "remote-winjsonserver",
    "osFamily": "windows",
    "username": "administrator",
    "connectionType": "WINRM_NATIVE",
    "node-executo": "overthere-winrm",
    "winrm-password-option": "option.winrmPassword",
    "osVersion": "16",
    "osArch": "x86_64",
    "description": "Rundeck remote json server node",
    "hostname": "ip",
    "nodename": "json-winproject",
    "osName": "windwos 8",
    "winrm-protocol": "http",
    "winrmPassword": "pass
    "winrm-auth-type": "basic",
    "winrm-password-storage-path": "keys/windows",
    "winrmTimeout": "30000"


Disable the administrator mode in remote windows machine:

    Execute below commands to open the windows policies using below command and complete below steps.

    C:\Windows\system32> GPEDIT.MSC

    a. Go to Computer Configuration –> Windows Settings –> Security Settings –> Local Policies –> Security Options
    b. Search for below policies

    User Account Control: Admin Approval Mode for the Built-in Administrator account
    User Account Control: Behaviour of the elevation prompt for administrators in Admin Approval Mode
    User Account Control: Run all administrators in Admin Approval Mode


name: Specify the node name of the remote server
hostname: Remote host node, can be the ip address and include port number the default port are 5985/5986 (http/https).
username: Remote username to get access to the remote host
winrm-cmd: Execute commands using Cmd or PowerShell
winrm-password-storage-path: Specifies a Key Storage Path to look up the authentication password from keys/windwod@##reat pass-under keystorge
winrm-protocol: Determine the protocol to use, can be http or https
winrm-auth-type: Type of authentication to use, can be basic or kerberos or ntlm
winrm-domain: Kerberos domain


##mail cofiguration| grrovy properties



change prefrences,propertires in rundeck/etc


conf files

/etc/framweork.properties
profile
prefrences.properties
rundeck-config.groovy|rundeck-config

add rundeck.config.location=/home/rundeck/server/config/rundeck-config.groovy
// loglevel.default is the default log level for jobs: ERROR,WARN,INFO,VERBOSE,DEBUG
loglevel.default="INFO"
// rdeck.base=/homerundeck
rdeck.base="/home/rundeck"




grails {
  mail {
    host="smtp.gmail.com"
    mail.smtp.starttls.enable= true
    port=587
    username="user@gmail"
    password="apppassword"
   props=["mail.smtp.starttls.enable":true,"mail.smtp.auth":true, "mail.smtp.socketFactory.port":587]
  }
}

grails.mail.default.from="suser@i-exceed.com"
// rss.enabled if set to true enables RSS feeds that are public (non-authenticated)
rss.enabled=false
server.address="hostname"
grails.serverURL="http://hostname:4440"
dataSource.dbCreate = "update"
dataSource.url = "jdbc:h2:file:/home/rundeck/server/data/grailsdb;MVCC=true"

// Pre Auth mode settings
rundeck.security.authorization.preauthenticated.enabled=false
rundeck.security.authorization.preauthenticated.attributeName="REMOTE_USER_GROUPS"
rundeck.security.authorization.preauthenticated.delimiter=","
// Header from which to obtain user name
rundeck.security.authorization.preauthenticated.userNameHeader="X-Forwarded-Uuid"
// Header from which to obtain list of roles
rundeck.security.authorization.preauthenticated.userRolesHeader="X-Forwarded-Roles"
// Redirect to upstream logout url
rundeck.security.authorization.preauthenticated.redirectLogout=false
rundeck.security.authorization.preauthenticated.redirectUrl="/oauth2/sign_in"

rundeck.log4j.config.file="/home/superuser/ansible/rundeck/server/config/log4j.properties"
